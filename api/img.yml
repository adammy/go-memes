openapi: 3.0.3

info:
  title: Image Service
  description: The Image Service provides operations for getting, uploading, and deleting base images.
  version: 1.0.0

servers:
  - url: http://localhost:8080/v1
  - url: https://img.api.memepen.com/v1

paths:
  /images/{imageID}:
    get:
      operationId: getImage
      summary: Get Image
      description: GetImage retrieves the requested Image.
      tags:
        - Image
      parameters:
        - in: path
          name: imageID
          required: true
          schema:
            type: string
            description: ImageID is the ID of the requested Image.
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Image'
        404:
          description: Not Found
        500:
          description: Internal Server Error
    delete:
      operationId: deleteImage
      summary: Delete Image
      description: DeleteImage deletes the requested Image.
      tags:
        - Image
      parameters:
        - in: path
          name: imageID
          required: true
          schema:
            type: string
            description: ImageID is the ID of the requested Image.
      responses:
        204:
          description: No Content
        404:
          description: Not Found
        500:
          description: Internal Server Error
  /images:
    post:
      operationId: createImage
      summary: Create Image
      description: CreateImage creates a new Image.
      tags:
        - Image
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateImageJSON'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateImageForm'
          image/png:
            schema:
              type: string
              format: binary
          image/jpg:
            schema:
              type: string
              format: binary
          image/jpeg:
            schema:
              type: string
              format: binary
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Image'
        400:
          description: Bad Request
        500:
          description: Internal Server Error

components:
  schemas:
    Image:
      type: object
      description: Image defines metadata for a base image.
      required:
        - id
        - url
        - createdOn
        - width
        - height
      properties:
        id:
          type: string
          description: ID is a unique identifier for the template.
          format: uuid
          x-go-name: ID
          x-go-type: string
        url:
          type: string
          description: URL is the full URL to the base image.
          format: uri
          x-go-name: URL
        createdOn:
          type: string
          description: CreatedOn defines the date/time the base image was created.
          format: date-time
        width:
          type: integer
          description: Width is the width of the base image. We want this precalculated and stored to avoid continually calculating this.
          minimum: 1
          maximum: 2000
        height:
          type: integer
          description: Height is the height of the base image. We want this precalculated and stored to avoid continually calculating this.
          minimum: 1
          maximum: 2000
    CreateImageJSON:
      type: object
      description: CreateImageJSON defines where to upload a base image from.
      required:
        - url
      properties:
        url:
          type: string
          description: URL is the full URL to the base image.
          format: uri
          x-go-name: URL
    CreateImageForm:
      type: object
      description: CreateImageForm defines a base image to upload.
      required:
        - image
      properties:
        image:
          type: string
          description: Image is the image to upload.
          format: binary
